{"ast":null,"code":"import _toConsumableArray from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/src/components/WebplayerList.js\";\nimport React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport { API_ROOT } from '../constants';\nimport NewWebplayerForm from './NewWebplayerForm';\nimport UserSongsArea from './UserSongsArea';\nimport Cable from './Cable';\n\nvar WebplayerList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WebplayerList, _React$Component);\n\n  function WebplayerList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WebplayerList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WebplayerList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      webplayers: [],\n      activeWebplayer: null\n    };\n\n    _this.componentDidMount = function () {\n      fetch(\"\".concat(API_ROOT, \"/webplayers\")).then(function (resp) {\n        return resp.json();\n      }).then(function (webplayers) {\n        return _this.setState({\n          webplayers: webplayers\n        });\n      });\n    };\n\n    _this.handleClick = function (id) {\n      _this.setState({\n        activeWebplayer: id\n      });\n    };\n\n    _this.handleRecievedWebplayer = function (response) {\n      var webPlayer = response.webPlayer;\n\n      _this.setState({\n        webplayers: [].concat(_toConsumableArray(_this.state.webplayers), [webPlayer])\n      });\n    };\n\n    _this.handleRecievedUserSong = function (response) {\n      var userSong = response.userSong;\n\n      var webplayers = _toConsumableArray(_this.state.webplayers);\n\n      var webplayer = webplayers.find(function (webplayer) {\n        return webplayer.id === userSong.webplayer_id;\n      });\n      webplayer.userSongs = [].concat(_toConsumableArray(webplayer.userSongs), [userSong]);\n\n      _this.setState({\n        webplayer: webplayer\n      });\n    };\n\n    _this.render = function () {\n      var _this$state = _this.state,\n          webplayers = _this$state.webplayers,\n          activeWebplayer = _this$state.activeWebplayer;\n      return React.createElement(\"div\", {\n        className: \"webplayersList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(ActionCable, {\n        channel: {\n          channel: 'webplayers_channel'\n        },\n        onReceived: _this.handleRecievedWebplayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), _this.state.webplayers.length ? React.createElement(Cable, {\n        webplayers: webplayers,\n        handleRecievedUserSong: _this.handleRecievedUserSong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }) : null, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Webplayers\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, mapWebplayers(webplayers, _this.handleClick)), React.createElement(NewWebplayerForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), activeWebplayer ? React.createElement(UserSongsArea, {\n        webplayer: findActiveWebplayer(webplayers, activeWebplayer),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }) : null);\n    };\n\n    return _this;\n  }\n\n  return WebplayerList;\n}(React.Component);\n\nexport default WebplayerList; // helpers\n\nvar findActiveWebplayer = function findActiveWebplayer(webplayers, activeWebplayer) {\n  return webplayers.find(function (webplayer) {\n    return webplayer.id === activeWebplayer;\n  });\n};\n\nvar mapWebplayers = function mapWebplayers(webplayers, handleClick) {\n  console.log(webplayers);\n  return webplayers.map(function (webplayer) {\n    return React.createElement(\"li\", {\n      key: webplayer.id,\n      onClick: function onClick() {\n        return handleClick(webplayer.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, webplayer.title);\n  });\n};","map":{"version":3,"sources":["/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/src/components/WebplayerList.js"],"names":["React","ActionCable","API_ROOT","NewWebplayerForm","UserSongsArea","Cable","WebplayerList","state","webplayers","activeWebplayer","componentDidMount","fetch","then","resp","json","setState","handleClick","id","handleRecievedWebplayer","response","webPlayer","handleRecievedUserSong","userSong","webplayer","find","webplayer_id","userSongs","render","channel","length","mapWebplayers","findActiveWebplayer","Component","console","log","map","title"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport { API_ROOT } from '../constants';\nimport NewWebplayerForm from './NewWebplayerForm';\nimport UserSongsArea from './UserSongsArea';\nimport Cable from './Cable';\n\nclass WebplayerList extends React.Component {\n  state = {\n    webplayers: [],\n    activeWebplayer: null\n  };\n\n  componentDidMount = () => {\n    fetch(`${API_ROOT}/webplayers`)\n    .then(resp => resp.json())\n    .then( webplayers => this.setState({ webplayers: webplayers }));\n  };\n\n  handleClick = id => {\n    this.setState({ activeWebplayer: id });\n  };\n\n  handleRecievedWebplayer = response => {\n    const { webPlayer } = response;\n    this.setState({\n        webplayers: [...this.state.webplayers, webPlayer ]\n    });\n  };\n\n  handleRecievedUserSong = response => {\n    const { userSong } = response;\n    const webplayers = [...this.state.webplayers];\n    const webplayer = webplayers.find(\n      webplayer => webplayer.id === userSong.webplayer_id\n    );\n    webplayer.userSongs = [...webplayer.userSongs, userSong];\n    this.setState({ webplayer })\n  };\n\n  render = () => {\n    const { webplayers, activeWebplayer } = this.state;\n    return (\n      <div className=\"webplayersList\">\n        <ActionCable\n          channel={{ channel: 'webplayers_channel' }}\n          onReceived={this.handleRecievedWebplayer}\n        />\n        {this.state.webplayers.length ? (\n          <Cable\n            webplayers={webplayers}\n            handleRecievedUserSong={this.handleRecievedUserSong}\n          />\n        ) : null}\n        <h2>Webplayers</h2>\n        <ul>{mapWebplayers(webplayers, this.handleClick)}</ul>\n        <NewWebplayerForm/>\n        {activeWebplayer ? (\n          <UserSongsArea\n          webplayer={findActiveWebplayer(\n            webplayers,\n            activeWebplayer\n          )}\n          />\n        ):null}\n      </div>\n    );\n  };\n}\n\nexport default WebplayerList;\n\n// helpers\n\nconst findActiveWebplayer = (webplayers, activeWebplayer) => {\n  return webplayers.find(\n    webplayer => webplayer.id === activeWebplayer\n  );\n}\n\nconst mapWebplayers = (webplayers, handleClick) => {\n  console.log(webplayers);\n  return webplayers.map(webplayer => {\n    return (\n      <li key={webplayer.id} onClick={() => handleClick(webplayer.id)}>\n        {webplayer.title}\n      </li>\n    );\n  });\n};\n"]},"metadata":{},"sourceType":"module"}