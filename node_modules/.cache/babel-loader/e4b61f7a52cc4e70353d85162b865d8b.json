{"ast":null,"code":"import _toConsumableArray from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/src/components/WebplayerList.js\";\nimport React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport { API_ROOT } from '../constants';\nimport NewWebplayerForm from './NewWebplayerForm';\nimport UserSongsArea from './UserSongsArea';\nimport Cable from './Cable';\nimport { Button, Checkbox, Grid, Header, Icon, Image, Menu, Segment, Sidebar } from 'semantic-ui-react';\nimport PropTypes from 'prop-types'; //css\n\nimport '../style/sass/components/base.scss'; // const webPlayer =\n\nvar WebplayerList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WebplayerList, _React$Component);\n\n  function WebplayerList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WebplayerList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WebplayerList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      webplayers: [],\n      activeWebplayer: null,\n      visible: false,\n      streaming: [],\n      animation: 'overlay',\n      direction: 'left',\n      dimmed: false\n    };\n\n    _this.handleAnimationChange = function (animation) {\n      return function () {\n        return _this.setState({\n          animation: animation,\n          visible: !_this.state.visible\n        });\n      };\n    };\n\n    _this.handleDimmedChange = function (e, _ref) {\n      var checked = _ref.checked;\n      return _this.setState({\n        dimmed: checked\n      });\n    };\n\n    _this.handleDirectionChange = function (direction) {\n      return function () {\n        return _this.setState({\n          direction: direction,\n          visible: false\n        });\n      };\n    };\n\n    _this.componentDidMount = function () {\n      var token = localStorage.token;\n      fetch(\"\".concat(API_ROOT, \"/webplayers\"), {\n        method: 'GET',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (webplayers) {\n        _this.setState({\n          webplayers: webplayers\n        });\n      });\n    };\n\n    _this.componentDidUpdate = function (prevState) {\n      if (_this.state.webplayers !== prevState.webplayers) {\n        var token = localStorage.token;\n        fetch(\"\".concat(API_ROOT, \"/webplayers\"), {\n          method: 'GET',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then(function (resp) {\n          return resp.json();\n        }).then(function (webplayers) {\n          return _this.setState({\n            webplayers: webplayers\n          });\n        });\n      }\n    };\n\n    _this.handleClick = function (id) {\n      _this.setState({\n        activeWebplayer: id\n      });\n    };\n\n    _this.handleRecievedWebplayer = function (response) {\n      var webPlayer = response.webPlayer;\n\n      _this.setState({\n        webplayers: [].concat(_toConsumableArray(_this.state.webplayers), [webPlayer])\n      });\n    };\n\n    _this.handleRecievedUserSong = function (response) {\n      var userSong = response.userSong;\n\n      var webplayers = _toConsumableArray(_this.state.webplayers);\n\n      var webplayer = webplayers.find(function (webplayer) {\n        return webplayer.id === userSong.webplayer_id;\n      });\n      webplayer.userSongs = [].concat(_toConsumableArray(webplayer.userSongs), [userSong]);\n\n      _this.setState({\n        webplayer: webplayer\n      });\n    };\n\n    _this.render = function () {\n      var _this$state = _this.state,\n          animation = _this$state.animation,\n          dimmed = _this$state.dimmed,\n          direction = _this$state.direction,\n          visible = _this$state.visible;\n      var vertical = direction === 'bottom' || direction === 'top';\n      return React.createElement(\"div\", {\n        className: \"webplayersList\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(ActionCable, {\n        channel: {\n          channel: 'webplayers_channel'\n        },\n        onReceived: _this.handleRecievedWebplayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), _this.state.webplayers.length ? React.createElement(Cable, {\n        webplayers: webplayers,\n        handleRecievedUserSong: _this.handleRecievedUserSong,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }) : null, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Webplayers\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, mapWebplayers(webplayers, _this.handleClick, _this.props.user)), React.createElement(NewWebplayerForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), activeWebplayer ? React.createElement(UserSongsArea, {\n        webplayer: findActiveWebplayer(webplayers, activeWebplayer),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }) : null, React.createElement(Checkbox, {\n        checked: dimmed,\n        label: \"Dim Page\",\n        onChange: _this.handleDimmedChange,\n        toggle: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(Header, {\n        as: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Direction\"), React.createElement(Button.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Button, {\n        active: direction === 'left',\n        onClick: _this.handleDirectionChange('left'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Left\"), React.createElement(Button, {\n        active: direction === 'right',\n        onClick: _this.handleDirectionChange('right'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Right\"), React.createElement(Button, {\n        active: direction === 'top',\n        onClick: _this.handleDirectionChange('top'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Top\"), React.createElement(Button, {\n        active: direction === 'bottom',\n        onClick: _this.handleDirectionChange('bottom'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Bottom\")), React.createElement(Header, {\n        as: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"All Direction Animations\"), React.createElement(Button, {\n        onClick: _this.handleAnimationChange('overlay'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Overlay\"), React.createElement(Button, {\n        onClick: _this.handleAnimationChange('push'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Push\"), React.createElement(Button, {\n        onClick: _this.handleAnimationChange('scale down'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Scale Down\"), React.createElement(Header, {\n        as: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Vertical-Only Animations\"), React.createElement(Button, {\n        disabled: vertical,\n        onClick: _this.handleAnimationChange('uncover'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Uncover\"), React.createElement(Button, {\n        disabled: vertical,\n        onClick: _this.handleAnimationChange('slide along'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Slide Along\"), React.createElement(Button, {\n        disabled: vertical,\n        onClick: _this.handleAnimationChange('slide out'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Slide Out\"), React.createElement(Sidebar.Pushable, {\n        as: Segment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, vertical ? React.createElement(HorizontalSidebar, {\n        animation: animation,\n        direction: direction,\n        visible: visible,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }) : null, vertical ? null : React.createElement(VerticalSidebar, {\n        animation: animation,\n        direction: direction,\n        visible: visible,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(Sidebar.Pusher, {\n        dimmed: dimmed && visible,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Application Content\"), React.createElement(Image, {\n        src: \"https://react.semantic-ui.com/images/wireframe/paragraph.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })))));\n    };\n\n    return _this;\n  }\n\n  return WebplayerList;\n}(React.Component);\n\nexport default WebplayerList; // helpers\n\nvar findActiveWebplayer = function findActiveWebplayer(webplayers, activeWebplayer) {\n  return webplayers.find(function (webplayer) {\n    return webplayer.id === activeWebplayer;\n  });\n};\n\nvar mapWebplayers = function mapWebplayers(webplayers, handleClick, user) {\n  return webplayers.map(function (webplayer) {\n    return React.createElement(\"div\", {\n      class: \"ui relaxed divided list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"headphones icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      key: webplayer.id,\n      onClick: function onClick() {\n        return handleClick(webplayer.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, webplayer.username, \" is listening to \", webplayer.title), React.createElement(\"div\", {\n      class: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Updated 5 mins ago\"))));\n  });\n};","map":{"version":3,"sources":["/Users/shivanibrijmohan/Development/code/Mod5/bloc/bloc-front-end/src/components/WebplayerList.js"],"names":["React","ActionCable","API_ROOT","NewWebplayerForm","UserSongsArea","Cable","Button","Checkbox","Grid","Header","Icon","Image","Menu","Segment","Sidebar","PropTypes","WebplayerList","state","webplayers","activeWebplayer","visible","streaming","animation","direction","dimmed","handleAnimationChange","setState","handleDimmedChange","e","checked","handleDirectionChange","componentDidMount","token","localStorage","fetch","method","headers","Accept","Authorization","then","resp","json","componentDidUpdate","prevState","handleClick","id","handleRecievedWebplayer","response","webPlayer","handleRecievedUserSong","userSong","webplayer","find","webplayer_id","userSongs","render","vertical","channel","length","mapWebplayers","props","user","findActiveWebplayer","Component","map","username","title"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ActionCable } from 'react-actioncable-provider';\nimport { API_ROOT } from '../constants';\nimport NewWebplayerForm from './NewWebplayerForm';\nimport UserSongsArea from './UserSongsArea';\nimport Cable from './Cable';\nimport {Button,Checkbox,Grid,Header,Icon,Image,Menu,Segment,Sidebar} from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\n//css\nimport '../style/sass/components/base.scss'\n\n  // const webPlayer =\n\nclass WebplayerList extends React.Component {\n  state = {\n    webplayers: [],\n    activeWebplayer: null,\n    visible:false,\n    streaming: [],\n    animation: 'overlay',\n    direction: 'left',\n    dimmed: false,\n  };\n\n  handleAnimationChange = animation => () =>\n     this.setState({ animation, visible: !this.state.visible })\n  handleDimmedChange = (e, { checked }) => this.setState({ dimmed: checked })\n  handleDirectionChange = direction => () => this.setState({ direction, visible: false })\n\n  componentDidMount = () => {\n    let token = localStorage.token\n    fetch(`${API_ROOT}/webplayers`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n    })\n    .then(resp => resp.json())\n    .then( webplayers => {\n      this.setState({ webplayers: webplayers })\n    });\n  };\n\n  componentDidUpdate = (prevState) => {\n    if (this.state.webplayers !== prevState.webplayers) {\n      let token = localStorage.token\n      fetch(`${API_ROOT}/webplayers`, {\n        method: 'GET',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n      })\n      .then(resp => resp.json())\n      .then( webplayers => this.setState({ webplayers: webplayers }));\n    }\n  }\n\n  handleClick = id => {\n    this.setState({ activeWebplayer: id });\n  };\n\n  handleRecievedWebplayer = response => {\n    const { webPlayer } = response;\n    this.setState({\n        webplayers: [...this.state.webplayers, webPlayer ]\n    });\n  };\n\n//sets up the chat to see who is in the chat\n  handleRecievedUserSong = response => {\n    const { userSong } = response;\n    const webplayers = [...this.state.webplayers];\n    const webplayer = webplayers.find(\n      webplayer => webplayer.id === userSong.webplayer_id\n    );\n    webplayer.userSongs = [...webplayer.userSongs, userSong];\n    this.setState({ webplayer })\n  };\n\n\n  render = () => {\n    const { animation, dimmed, direction, visible } = this.state\n    const vertical = direction === 'bottom' || direction === 'top'\n    return (\n      <div className=\"webplayersList\">\n        <ActionCable\n          channel={{ channel: 'webplayers_channel' }}\n          onReceived={this.handleRecievedWebplayer}\n        />\n        {this.state.webplayers.length ? (\n          <Cable\n            webplayers={webplayers}\n            handleRecievedUserSong={this.handleRecievedUserSong}\n          />\n        ) : null}\n        <h1>Webplayers</h1>\n\n        <ul>{mapWebplayers(webplayers, this.handleClick, this.props.user)}</ul>\n        <NewWebplayerForm/>\n        {activeWebplayer ? (\n          <UserSongsArea\n          webplayer={findActiveWebplayer(\n            webplayers,\n            activeWebplayer\n          )}\n          />\n        ):null}\n\n        <Checkbox checked={dimmed} label='Dim Page' onChange={this.handleDimmedChange} toggle />\n\n<Header as='h5'>Direction</Header>\n<Button.Group>\n  <Button active={direction === 'left'} onClick={this.handleDirectionChange('left')}>\n    Left\n  </Button>\n  <Button active={direction === 'right'} onClick={this.handleDirectionChange('right')}>\n    Right\n  </Button>\n  <Button active={direction === 'top'} onClick={this.handleDirectionChange('top')}>\n    Top\n  </Button>\n  <Button active={direction === 'bottom'} onClick={this.handleDirectionChange('bottom')}>\n    Bottom\n  </Button>\n</Button.Group>\n\n<Header as='h5'>All Direction Animations</Header>\n<Button onClick={this.handleAnimationChange('overlay')}>Overlay</Button>\n<Button onClick={this.handleAnimationChange('push')}>Push</Button>\n<Button onClick={this.handleAnimationChange('scale down')}>Scale Down</Button>\n\n<Header as='h5'>Vertical-Only Animations</Header>\n<Button disabled={vertical} onClick={this.handleAnimationChange('uncover')}>\n  Uncover\n</Button>\n<Button disabled={vertical} onClick={this.handleAnimationChange('slide along')}>\n  Slide Along\n</Button>\n<Button disabled={vertical} onClick={this.handleAnimationChange('slide out')}>\n  Slide Out\n</Button>\n\n<Sidebar.Pushable as={Segment}>\n  {vertical ? (\n    <HorizontalSidebar animation={animation} direction={direction} visible={visible} />\n  ) : null}\n  {vertical ? null : (\n    <VerticalSidebar animation={animation} direction={direction} visible={visible} />\n  )}\n\n  <Sidebar.Pusher dimmed={dimmed && visible}>\n    <Segment basic>\n      <Header as='h3'>Application Content</Header>\n      <Image src='https://react.semantic-ui.com/images/wireframe/paragraph.png' />\n    </Segment>\n  </Sidebar.Pusher>\n</Sidebar.Pushable>\n      </div>\n    );\n  };\n}\n\nexport default WebplayerList;\n\n// helpers\n\nconst findActiveWebplayer = (webplayers, activeWebplayer) => {\n  return webplayers.find(\n    webplayer => webplayer.id === activeWebplayer\n  );\n}\n\nconst mapWebplayers = (webplayers, handleClick, user) => {\n  return webplayers.map(webplayer => {\n    return (\n        <div class=\"ui relaxed divided list\">\n        <div class=\"item\">\n          <i class=\"headphones icon\"></i>\n          <div class=\"content\">\n          <p key={webplayer.id} onClick={() => handleClick(webplayer.id)}>\n            {webplayer.username} is listening to {webplayer.title}\n          </p>\n            <div class=\"description\">Updated 5 mins ago</div>\n          </div>\n        </div>\n      </div>\n    );\n  });\n};\n"]},"metadata":{},"sourceType":"module"}